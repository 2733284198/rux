<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Rux by gookit</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Rux</h1>
        <p>⚡ Rux is an simple and fast web framework. support middleware, compatible http.Handler interface. 简单且快速的 Go web 框架，支持中间件，兼容 http.Handler 接口</p>
        <p class="view"><a href="https://github.com/gookit/rux">View the Project on GitHub <small>gookit/rux</small></a></p>
        <ul>
          <li><a href="https://github.com/gookit/rux/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/gookit/rux/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/gookit/rux">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="rux" class="anchor" href="#rux" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Rux</h1>
<p><a href="https://github.com/gookit/rux"><img src="https://img.shields.io/github/tag/gookit/rux" alt="GitHub tag (latest SemVer)"></a>
<a href="https://pkg.go.dev/github.com/gookit/rux?tab=doc"><img src="https://godoc.org/github.com/gookit/rux?status.svg" alt="GoDoc"></a>
<a href="https://travis-ci.org/gookit/rux"><img src="https://travis-ci.org/gookit/rux.svg?branch=master" alt="Build Status"></a>
<a href="https://coveralls.io/github/gookit/rux?branch=master"><img src="https://coveralls.io/repos/github/gookit/rux/badge.svg?branch=master" alt="Coverage Status"></a>
<a href="https://goreportcard.com/report/github.com/gookit/rux"><img src="https://goreportcard.com/badge/github.com/gookit/rux" alt="Go Report Card"></a></p>
<p>Simple and fast web framework for build golang HTTP applications.</p>
<blockquote>
<p><strong><a href="README.zh-CN.md">中文说明</a></strong></p>
</blockquote>
<ul>
<li>Fast route match, support route group</li>
<li>Support route path params and named routing</li>
<li>Support cache recently accessed dynamic routes</li>
<li>Support route middleware, group middleware, global middleware</li>
<li>Support generic <code>http.Handler</code> interface middleware</li>
<li>Support static file access handle</li>
<li>Support add handlers for handle <code>NotFound</code> and <code>NotAllowed</code>
</li>
</ul>
<h2>
<a id="godoc" class="anchor" href="#godoc" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>GoDoc</h2>
<ul>
<li><a href="https://pkg.go.dev/github.com/gookit/rux?tab=doc">godoc for github</a></li>
</ul>
<h2>
<a id="quick-start" class="anchor" href="#quick-start" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Quick start</h2>
<div class="highlight highlight-source-go"><pre><span class="pl-k">package</span> main

<span class="pl-k">import</span> (
	<span class="pl-s">"github.com/gookit/rux"</span>
)

<span class="pl-k">func</span> <span class="pl-en">main</span>() {
	<span class="pl-s1">r</span> <span class="pl-c1">:=</span> <span class="pl-s1">rux</span>.<span class="pl-en">New</span>()
	
	<span class="pl-c">// Static Assets</span>
	<span class="pl-c">// one file</span>
	<span class="pl-s1">r</span>.<span class="pl-en">StaticFile</span>(<span class="pl-s">"/site.js"</span>, <span class="pl-s">"testdata/site.js"</span>)
	<span class="pl-c">// allow any files in the dir.</span>
	<span class="pl-s1">r</span>.<span class="pl-en">StaticDir</span>(<span class="pl-s">"/static"</span>, <span class="pl-s">"testdata"</span>)
	<span class="pl-c">// file type limit</span>
	<span class="pl-s1">r</span>.<span class="pl-en">StaticFiles</span>(<span class="pl-s">"/assets"</span>, <span class="pl-s">"testdata"</span>, <span class="pl-s">"css|js"</span>)

	<span class="pl-c">// Add Routes:</span>
	
	<span class="pl-s1">r</span>.<span class="pl-en">GET</span>(<span class="pl-s">"/"</span>, <span class="pl-k">func</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
		<span class="pl-s1">c</span>.<span class="pl-en">Text</span>(<span class="pl-c1">200</span>, <span class="pl-s">"hello"</span>)
	})
	<span class="pl-s1">r</span>.<span class="pl-en">GET</span>(<span class="pl-s">"/hello/{name}"</span>, <span class="pl-k">func</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
		<span class="pl-s1">c</span>.<span class="pl-en">Text</span>(<span class="pl-c1">200</span>, <span class="pl-s">"hello "</span> <span class="pl-c1">+</span> <span class="pl-s1">c</span>.<span class="pl-en">Param</span>(<span class="pl-s">"name"</span>))
	})
	<span class="pl-s1">r</span>.<span class="pl-en">POST</span>(<span class="pl-s">"/post"</span>, <span class="pl-k">func</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
		<span class="pl-s1">c</span>.<span class="pl-en">Text</span>(<span class="pl-c1">200</span>, <span class="pl-s">"hello"</span>)
	})
	<span class="pl-s1">r</span>.<span class="pl-en">Group</span>(<span class="pl-s">"/articles"</span>, <span class="pl-k">func</span>() {
		<span class="pl-s1">r</span>.<span class="pl-en">GET</span>(<span class="pl-s">""</span>, <span class="pl-k">func</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
			<span class="pl-s1">c</span>.<span class="pl-en">Text</span>(<span class="pl-c1">200</span>, <span class="pl-s">"view list"</span>)
		})
		<span class="pl-s1">r</span>.<span class="pl-en">POST</span>(<span class="pl-s">""</span>, <span class="pl-k">func</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
			<span class="pl-s1">c</span>.<span class="pl-en">Text</span>(<span class="pl-c1">200</span>, <span class="pl-s">"create ok"</span>)
		})
		<span class="pl-s1">r</span>.<span class="pl-en">GET</span>(<span class="pl-s">`/{id:\d+}`</span>, <span class="pl-k">func</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
			<span class="pl-s1">c</span>.<span class="pl-en">Text</span>(<span class="pl-c1">200</span>, <span class="pl-s">"view detail, id: "</span> <span class="pl-c1">+</span> <span class="pl-s1">c</span>.<span class="pl-en">Param</span>(<span class="pl-s">"id"</span>))
		})
	})
	
	<span class="pl-c">// add multi method support for an route path</span>
	<span class="pl-s1">r</span>.<span class="pl-en">Add</span>(<span class="pl-s">"/post[/{id}]"</span>, <span class="pl-k">func</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
		<span class="pl-k">if</span> <span class="pl-s1">c</span>.<span class="pl-en">Param</span>(<span class="pl-s">"id"</span>) <span class="pl-c1">==</span> <span class="pl-s">""</span> {
			<span class="pl-c">// do create post</span>
			<span class="pl-s1">c</span>.<span class="pl-en">Text</span>(<span class="pl-c1">200</span>, <span class="pl-s">"created"</span>)
			<span class="pl-k">return</span>
		}
		
		<span class="pl-s1">id</span> <span class="pl-c1">:=</span> <span class="pl-s1">c</span>.<span class="pl-c1">Params</span>.<span class="pl-en">Int</span>(<span class="pl-s">"id"</span>)
		<span class="pl-c">// do update post</span>
		<span class="pl-s1">c</span>.<span class="pl-en">Text</span>(<span class="pl-c1">200</span>, <span class="pl-s">"updated "</span> <span class="pl-c1">+</span> <span class="pl-s1">fmt</span>.<span class="pl-en">Sprint</span>(<span class="pl-s1">id</span>))
	}, <span class="pl-s1">rux</span>.<span class="pl-c1">POST</span>, <span class="pl-s1">rux</span>.<span class="pl-c1">PUT</span>)

	<span class="pl-c">// quick start</span>
	<span class="pl-s1">r</span>.<span class="pl-en">Listen</span>(<span class="pl-s">":8080"</span>)
	<span class="pl-c">// can also</span>
	<span class="pl-c">// http.ListenAndServe(":8080", r)</span>
}</pre></div>
<h2>
<a id="use-middleware" class="anchor" href="#use-middleware" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Use Middleware</h2>
<p>rux support use middleware, allow:</p>
<ul>
<li>global middleware</li>
<li>group middleware</li>
<li>route middleware</li>
</ul>
<p><strong>Call priority</strong>: <code>global middleware -&gt; group middleware -&gt; route middleware</code></p>
<h3>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example</h3>
<div class="highlight highlight-source-go"><pre><span class="pl-k">package</span> main

<span class="pl-k">import</span> (
	<span class="pl-s">"fmt"</span>
	<span class="pl-s">"github.com/gookit/rux"</span>
)

<span class="pl-k">func</span> <span class="pl-en">main</span>() {
	<span class="pl-s1">r</span> <span class="pl-c1">:=</span> <span class="pl-s1">rux</span>.<span class="pl-en">New</span>()
	
	<span class="pl-c">// add global middleware</span>
	<span class="pl-s1">r</span>.<span class="pl-en">Use</span>(<span class="pl-k">func</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
	    <span class="pl-c">// do something ...</span>
	})
	
	<span class="pl-c">// add middleware for the route</span>
	<span class="pl-s1">route</span> <span class="pl-c1">:=</span> <span class="pl-s1">r</span>.<span class="pl-en">GET</span>(<span class="pl-s">"/middle"</span>, <span class="pl-k">func</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) { <span class="pl-c">// main handler</span>
		<span class="pl-s1">c</span>.<span class="pl-en">WriteString</span>(<span class="pl-s">"-O-"</span>)
	}, <span class="pl-k">func</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) { <span class="pl-c">// middle 1</span>
        <span class="pl-s1">c</span>.<span class="pl-en">WriteString</span>(<span class="pl-s">"a"</span>)
        <span class="pl-s1">c</span>.<span class="pl-en">Next</span>() <span class="pl-c">// Notice: call Next()</span>
        <span class="pl-s1">c</span>.<span class="pl-en">WriteString</span>(<span class="pl-s">"A"</span>)
        <span class="pl-c">// if call Abort(), will abort at the end of this middleware run</span>
        <span class="pl-c">// c.Abort() </span>
    })
	
	<span class="pl-c">// add more by Use()</span>
	<span class="pl-s1">route</span>.<span class="pl-en">Use</span>(<span class="pl-k">func</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) { <span class="pl-c">// middle 2</span>
		<span class="pl-s1">c</span>.<span class="pl-en">WriteString</span>(<span class="pl-s">"b"</span>)
		<span class="pl-s1">c</span>.<span class="pl-en">Next</span>()
		<span class="pl-s1">c</span>.<span class="pl-en">WriteString</span>(<span class="pl-s">"B"</span>)
	})

	<span class="pl-c">// now, access the URI /middle</span>
	<span class="pl-c">// will output: ab-O-BA</span>
}</pre></div>
<ul>
<li>
<strong>Call sequence</strong>: <code>middle 1 -&gt; middle 2 -&gt; main handler -&gt; middle 2 -&gt; middle 1</code>
</li>
<li>
<strong>Flow chart</strong>:</li>
</ul>
<pre lang="text"><code>        +-----------------------------+
        | middle 1                    |
        |  +----------------------+   |
        |  | middle 2             |   |
 start  |  |  +----------------+  |   | end
-------&gt;|  |  |  main handler  |  |   |---&gt;----
        |  |  |________________|  |   |    
        |  |______________________|   |  
        |_____________________________|
</code></pre>
<blockquote>
<p>more please see <a href="middleware_test.go">middleware_test.go</a> middleware tests</p>
</blockquote>
<h2>
<a id="use-httphandler" class="anchor" href="#use-httphandler" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Use http.Handler</h2>
<p>rux is support generic <code>http.Handler</code> interface middleware</p>
<blockquote>
<p>You can use <code>rux.WrapHTTPHandler()</code> convert <code>http.Handler</code> as <code>rux.HandlerFunc</code></p>
</blockquote>
<div class="highlight highlight-source-go"><pre><span class="pl-k">package</span> main

<span class="pl-k">import</span> (
	<span class="pl-s">"net/http"</span>
	
	<span class="pl-s">"github.com/gookit/rux"</span>
	<span class="pl-c">// here we use gorilla/handlers, it provides some generic handlers.</span>
	<span class="pl-s">"github.com/gorilla/handlers"</span>
)

<span class="pl-k">func</span> <span class="pl-en">main</span>() {
	<span class="pl-s1">r</span> <span class="pl-c1">:=</span> <span class="pl-s1">rux</span>.<span class="pl-en">New</span>()
	
	<span class="pl-c">// create a simple generic http.Handler</span>
	<span class="pl-s1">h0</span> <span class="pl-c1">:=</span> <span class="pl-s1">http</span>.<span class="pl-en">HandlerFunc</span>(<span class="pl-k">func</span> (<span class="pl-s1">w</span> http.<span class="pl-smi">ResponseWriter</span>, <span class="pl-s1">r</span> <span class="pl-c1">*</span>http.<span class="pl-smi">Request</span>) {
		<span class="pl-s1">w</span>.<span class="pl-en">Header</span>().<span class="pl-en">Set</span>(<span class="pl-s">"new-key"</span>, <span class="pl-s">"val"</span>)
	})
	
	<span class="pl-s1">r</span>.<span class="pl-en">Use</span>(<span class="pl-s1">rux</span>.<span class="pl-en">WrapHTTPHandler</span>(<span class="pl-s1">h0</span>), <span class="pl-s1">rux</span>.<span class="pl-en">WrapHTTPHandler</span>(<span class="pl-s1">handlers</span>.<span class="pl-en">ProxyHeaders</span>()))
	
	<span class="pl-s1">r</span>.<span class="pl-en">GET</span>(<span class="pl-s">"/"</span>, <span class="pl-k">func</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
		<span class="pl-s1">c</span>.<span class="pl-en">Text</span>(<span class="pl-c1">200</span>, <span class="pl-s">"hello"</span>)
	})
	<span class="pl-c">// add routes ...</span>
	
    <span class="pl-c">// Wrap our server with our gzip handler to gzip compress all responses.</span>
    <span class="pl-s1">http</span>.<span class="pl-en">ListenAndServe</span>(<span class="pl-s">":8000"</span>, <span class="pl-s1">handlers</span>.<span class="pl-en">CompressHandler</span>(<span class="pl-s1">r</span>))
}</pre></div>
<h2>
<a id="more-usage" class="anchor" href="#more-usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>More Usage</h2>
<h3>
<a id="static-assets" class="anchor" href="#static-assets" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Static Assets</h3>
<div class="highlight highlight-source-go"><pre><span class="pl-k">package</span> main

<span class="pl-k">import</span> (
	<span class="pl-s">"net/http"</span>
	
	<span class="pl-s">"github.com/gookit/rux"</span>
)

<span class="pl-k">func</span> <span class="pl-en">main</span>() {
	<span class="pl-s1">r</span> <span class="pl-c1">:=</span> <span class="pl-s1">rux</span>.<span class="pl-en">New</span>()

	<span class="pl-c">// one file</span>
	<span class="pl-s1">r</span>.<span class="pl-en">StaticFile</span>(<span class="pl-s">"/site.js"</span>, <span class="pl-s">"testdata/site.js"</span>)

	<span class="pl-c">// allow any files in the directory.</span>
	<span class="pl-s1">r</span>.<span class="pl-en">StaticDir</span>(<span class="pl-s">"/static"</span>, <span class="pl-s">"testdata"</span>)

	<span class="pl-c">// file type limit in the directory</span>
	<span class="pl-s1">r</span>.<span class="pl-en">StaticFiles</span>(<span class="pl-s">"/assets"</span>, <span class="pl-s">"testdata"</span>, <span class="pl-s">"css|js"</span>)
}</pre></div>
<h3>
<a id="name-route" class="anchor" href="#name-route" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Name Route</h3>
<p>In <code>rux</code>, you can add a named route, and you can get the corresponding route instance(<code>rux.Route</code>) from the router according to the name.</p>
<p>Examples：</p>
<div class="highlight highlight-source-go"><pre>	<span class="pl-s1">r</span> <span class="pl-c1">:=</span> <span class="pl-s1">rux</span>.<span class="pl-en">New</span>()
	
	<span class="pl-c">// Method 1</span>
	<span class="pl-s1">myRoute</span> <span class="pl-c1">:=</span> <span class="pl-s1">rux</span>.<span class="pl-en">NewNamedRoute</span>(<span class="pl-s">"name1"</span>, <span class="pl-s">"/path4/some/{id}"</span>, <span class="pl-s1">emptyHandler</span>, <span class="pl-s">"GET"</span>)
	<span class="pl-s1">r</span>.<span class="pl-en">AddRoute</span>(<span class="pl-s1">myRoute</span>)

	<span class="pl-c">// Method 2</span>
	<span class="pl-s1">rux</span>.<span class="pl-en">AddNamed</span>(<span class="pl-s">"name2"</span>, <span class="pl-s">"/"</span>, <span class="pl-k">func</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
		<span class="pl-s1">c</span>.<span class="pl-en">Text</span>(<span class="pl-c1">200</span>, <span class="pl-s">"hello"</span>)
	})

	<span class="pl-c">// Method 3</span>
	<span class="pl-s1">r</span>.<span class="pl-en">GET</span>(<span class="pl-s">"/hi"</span>, <span class="pl-k">func</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
		<span class="pl-s1">c</span>.<span class="pl-en">Text</span>(<span class="pl-c1">200</span>, <span class="pl-s">"hello"</span>)
	}).<span class="pl-en">NamedTo</span>(<span class="pl-s">"name3"</span>, <span class="pl-s1">r</span>)
	
	<span class="pl-c">// get route by name</span>
	<span class="pl-s1">myRoute</span> <span class="pl-c1">=</span> <span class="pl-s1">r</span>.<span class="pl-en">GetRoute</span>(<span class="pl-s">"name1"</span>)</pre></div>
<h3>
<a id="redirect" class="anchor" href="#redirect" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Redirect</h3>
<div class="highlight highlight-source-go"><pre>	<span class="pl-s1">r</span>.<span class="pl-en">GET</span>(<span class="pl-s">"/"</span>, <span class="pl-k">func</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
		<span class="pl-s1">c</span>.<span class="pl-en">AbortThen</span>().<span class="pl-en">Redirect</span>(<span class="pl-s">"/login"</span>, <span class="pl-c1">302</span>)
	})
    
	<span class="pl-c">// Or</span>
	<span class="pl-s1">r</span>.<span class="pl-en">GET</span>(<span class="pl-s">"/"</span>, <span class="pl-k">func</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
		<span class="pl-s1">c</span>.<span class="pl-en">Redirect</span>(<span class="pl-s">"/login"</span>, <span class="pl-c1">302</span>)
        <span class="pl-s1">c</span>.<span class="pl-en">Abort</span>()
	})

	<span class="pl-s1">r</span>.<span class="pl-en">GET</span>(<span class="pl-s">"/"</span>, <span class="pl-k">func</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
        <span class="pl-s1">c</span>.<span class="pl-en">Back</span>()
        <span class="pl-s1">c</span>.<span class="pl-en">Abort</span>()
    })</pre></div>
<h3>
<a id="multi-domains" class="anchor" href="#multi-domains" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Multi Domains</h3>
<blockquote>
<p>code is refer from <code>julienschmidt/httprouter</code></p>
</blockquote>
<div class="highlight highlight-source-go"><pre><span class="pl-k">package</span> main

<span class="pl-k">import</span> (
	<span class="pl-s">"log"</span>
	<span class="pl-s">"net/http"</span>

	<span class="pl-s">"github.com/gookit/rux"</span>
)

<span class="pl-k">type</span> <span class="pl-smi">HostSwitch</span> <span class="pl-k">map</span>[<span class="pl-smi">string</span>]http.<span class="pl-smi">Handler</span>

<span class="pl-c">// Implement the ServeHTTP method on our new type</span>
<span class="pl-k">func</span> (<span class="pl-s1">hs</span> <span class="pl-smi">HostSwitch</span>) <span class="pl-en">ServeHTTP</span>(<span class="pl-s1">w</span> http.<span class="pl-smi">ResponseWriter</span>, <span class="pl-s1">r</span> <span class="pl-c1">*</span>http.<span class="pl-smi">Request</span>) {
	<span class="pl-c">// Check if a http.Handler is registered for the given host.</span>
	<span class="pl-c">// If yes, use it to handle the request.</span>
	<span class="pl-k">if</span> <span class="pl-s1">router</span> <span class="pl-c1">:=</span> <span class="pl-s1">hs</span>[<span class="pl-s1">r</span>.<span class="pl-c1">Host</span>]; <span class="pl-s1">router</span> <span class="pl-c1">!=</span> <span class="pl-c1">nil</span> {
		<span class="pl-s1">router</span>.<span class="pl-en">ServeHTTP</span>(<span class="pl-s1">w</span>, <span class="pl-s1">r</span>)
	} <span class="pl-k">else</span> {
		<span class="pl-c">// Handle host names for which no handler is registered</span>
		<span class="pl-s1">http</span>.<span class="pl-en">Error</span>(<span class="pl-s1">w</span>, <span class="pl-s">"Forbidden"</span>, <span class="pl-c1">403</span>) <span class="pl-c">// Or Redirect?</span>
	}
}

<span class="pl-k">func</span> <span class="pl-en">main</span>() {
	<span class="pl-c">// Initialize a router as usual</span>
	<span class="pl-s1">router</span> <span class="pl-c1">:=</span> <span class="pl-s1">rux</span>.<span class="pl-en">New</span>()
	<span class="pl-s1">router</span>.<span class="pl-en">GET</span>(<span class="pl-s">"/"</span>, <span class="pl-s1">Index</span>)
	<span class="pl-s1">router</span>.<span class="pl-en">GET</span>(<span class="pl-s">"/hello/{name}"</span>, <span class="pl-k">func</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {})

	<span class="pl-c">// Make a new HostSwitch and insert the router (our http handler)</span>
	<span class="pl-c">// for example.com and port 12345</span>
	<span class="pl-s1">hs</span> <span class="pl-c1">:=</span> <span class="pl-en">make</span>(<span class="pl-smi">HostSwitch</span>)
	<span class="pl-s1">hs</span>[<span class="pl-s">"example.com:12345"</span>] <span class="pl-c1">=</span> <span class="pl-s1">router</span>

	<span class="pl-c">// Use the HostSwitch to listen and serve on port 12345</span>
	<span class="pl-s1">log</span>.<span class="pl-en">Fatal</span>(<span class="pl-s1">http</span>.<span class="pl-en">ListenAndServe</span>(<span class="pl-s">":12345"</span>, <span class="pl-s1">hs</span>))
}</pre></div>
<h3>
<a id="resetful-style" class="anchor" href="#resetful-style" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>RESETFul Style</h3>
<div class="highlight highlight-source-go"><pre><span class="pl-k">package</span> main

<span class="pl-k">import</span> (
	<span class="pl-s">"log"</span>
	<span class="pl-s">"net/http"</span>

	<span class="pl-s">"github.com/gookit/rux"</span>
)

<span class="pl-k">type</span> <span class="pl-smi">Product</span> <span class="pl-k">struct</span> {
}

<span class="pl-c">// Uses middlewares [optional]</span>
<span class="pl-k">func</span> (<span class="pl-smi">Product</span>) <span class="pl-en">Uses</span>() <span class="pl-k">map</span>[<span class="pl-smi">string</span>][]rux.<span class="pl-smi">HandlerFunc</span> {
	<span class="pl-k">return</span> <span class="pl-k">map</span>[<span class="pl-smi">string</span>][]rux.<span class="pl-smi">HandlerFunc</span>{
		<span class="pl-c">// function name: handlers</span>
		<span class="pl-s">"Delete"</span>: []rux.<span class="pl-smi">HandlerFunc</span>{
			<span class="pl-s1">handlers</span>.<span class="pl-en">HTTPBasicAuth</span>(<span class="pl-k">map</span>[<span class="pl-smi">string</span>]<span class="pl-smi">string</span>{<span class="pl-s">"test"</span>: <span class="pl-s">"123"</span>}),
			<span class="pl-s1">handlers</span>.<span class="pl-en">GenRequestID</span>(),
		},
	}
}

<span class="pl-c">// all products [optional]</span>
<span class="pl-k">func</span> (<span class="pl-s1">p</span> <span class="pl-c1">*</span><span class="pl-smi">Product</span>) <span class="pl-en">Index</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
	<span class="pl-c">// balabala</span>
}

<span class="pl-c">// create product [optional]</span>
<span class="pl-k">func</span> (<span class="pl-s1">p</span> <span class="pl-c1">*</span><span class="pl-smi">Product</span>) <span class="pl-en">Create</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
	<span class="pl-c">// balabala</span>
}

<span class="pl-c">// save new product [optional]</span>
<span class="pl-k">func</span> (<span class="pl-s1">p</span> <span class="pl-c1">*</span><span class="pl-smi">Product</span>) <span class="pl-en">Store</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
	<span class="pl-c">// balabala</span>
}

<span class="pl-c">// show product with {id} [optional]</span>
<span class="pl-k">func</span> (<span class="pl-s1">p</span> <span class="pl-c1">*</span><span class="pl-smi">Product</span>) <span class="pl-en">Show</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
	<span class="pl-c">// balabala</span>
}

<span class="pl-c">// edit product [optional]</span>
<span class="pl-k">func</span> (<span class="pl-s1">p</span> <span class="pl-c1">*</span><span class="pl-smi">Product</span>) <span class="pl-en">Edit</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
	<span class="pl-c">// balabala</span>
}

<span class="pl-c">// save edited product [optional]</span>
<span class="pl-k">func</span> (<span class="pl-s1">p</span> <span class="pl-c1">*</span><span class="pl-smi">Product</span>) <span class="pl-en">Update</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
	<span class="pl-c">// balabala</span>
}

<span class="pl-c">// delete product [optional]</span>
<span class="pl-k">func</span> (<span class="pl-s1">p</span> <span class="pl-c1">*</span><span class="pl-smi">Product</span>) <span class="pl-en">Delete</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
	<span class="pl-c">// balabala</span>
}

<span class="pl-k">func</span> <span class="pl-en">main</span>() {
	<span class="pl-s1">router</span> <span class="pl-c1">:=</span> <span class="pl-s1">rux</span>.<span class="pl-en">New</span>()

	<span class="pl-c">// methods	Path	Action	Route Name</span>
    <span class="pl-c">// GET	/product	index	product_index</span>
    <span class="pl-c">// GET	/product/create	create	product_create</span>
    <span class="pl-c">// POST	/product	store	product_store</span>
    <span class="pl-c">// GET	/product/{id}	show	product_show</span>
    <span class="pl-c">// GET	/product/{id}/edit	edit	product_edit</span>
    <span class="pl-c">// PUT/PATCH	/product/{id}	update	product_update</span>
    <span class="pl-c">// DELETE	/product/{id}	delete	product_delete</span>
    <span class="pl-c">// resetful style</span>
	<span class="pl-s1">router</span>.<span class="pl-en">Resource</span>(<span class="pl-s">"/"</span>, <span class="pl-en">new</span>(<span class="pl-smi">Product</span>))

	<span class="pl-s1">log</span>.<span class="pl-en">Fatal</span>(<span class="pl-s1">http</span>.<span class="pl-en">ListenAndServe</span>(<span class="pl-s">":12345"</span>, <span class="pl-s1">router</span>))
}</pre></div>
<h3>
<a id="controller-style" class="anchor" href="#controller-style" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Controller Style</h3>
<div class="highlight highlight-source-go"><pre><span class="pl-k">package</span> main

<span class="pl-k">import</span> (
	<span class="pl-s">"log"</span>
	<span class="pl-s">"net/http"</span>

	<span class="pl-s">"github.com/gookit/rux"</span>
)

<span class="pl-k">type</span> <span class="pl-smi">News</span> <span class="pl-k">struct</span> {
}

<span class="pl-k">func</span> (<span class="pl-s1">n</span> <span class="pl-c1">*</span><span class="pl-smi">News</span>) <span class="pl-en">AddRoutes</span>(<span class="pl-s1">g</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Router</span>) {
	<span class="pl-s1">g</span>.<span class="pl-en">GET</span>(<span class="pl-s">"/"</span>, <span class="pl-s1">n</span>.<span class="pl-c1">Index</span>)
	<span class="pl-s1">g</span>.<span class="pl-en">POST</span>(<span class="pl-s">"/"</span>, <span class="pl-s1">n</span>.<span class="pl-c1">Create</span>)
	<span class="pl-s1">g</span>.<span class="pl-en">PUT</span>(<span class="pl-s">"/"</span>, <span class="pl-s1">n</span>.<span class="pl-c1">Edit</span>)
}

<span class="pl-k">func</span> (<span class="pl-s1">n</span> <span class="pl-c1">*</span><span class="pl-smi">News</span>) <span class="pl-en">Index</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
	<span class="pl-c">// Do something</span>
}

<span class="pl-k">func</span> (<span class="pl-s1">n</span> <span class="pl-c1">*</span><span class="pl-smi">News</span>) <span class="pl-en">Create</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
	<span class="pl-c">// Do something</span>
}

<span class="pl-k">func</span> (<span class="pl-s1">n</span> <span class="pl-c1">*</span><span class="pl-smi">News</span>) <span class="pl-en">Edit</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
	<span class="pl-c">// Do something</span>
}

<span class="pl-k">func</span> <span class="pl-en">main</span>() {
	<span class="pl-s1">router</span> <span class="pl-c1">:=</span> <span class="pl-s1">rux</span>.<span class="pl-en">New</span>()

	<span class="pl-c">// controller style</span>
	<span class="pl-s1">router</span>.<span class="pl-en">Controller</span>(<span class="pl-s">"/news"</span>, <span class="pl-en">new</span>(<span class="pl-smi">News</span>))

	<span class="pl-s1">log</span>.<span class="pl-en">Fatal</span>(<span class="pl-s1">http</span>.<span class="pl-en">ListenAndServe</span>(<span class="pl-s">":12345"</span>, <span class="pl-s1">router</span>))
}</pre></div>
<h3>
<a id="build-url" class="anchor" href="#build-url" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Build URL</h3>
<div class="highlight highlight-source-go"><pre><span class="pl-k">package</span> main

<span class="pl-k">import</span> (
	<span class="pl-s">"log"</span>
	<span class="pl-s">"net/http"</span>

	<span class="pl-s">"github.com/gookit/rux"</span>
)

<span class="pl-k">func</span> <span class="pl-en">main</span>() {
	<span class="pl-c">// Initialize a router as usual</span>
	<span class="pl-s1">router</span> <span class="pl-c1">:=</span> <span class="pl-s1">rux</span>.<span class="pl-en">New</span>()
	<span class="pl-s1">router</span>.<span class="pl-en">GET</span>(<span class="pl-s">`/news/{category_id}/{new_id:\d+}/detail`</span>, <span class="pl-k">func</span>(<span class="pl-s1">c</span> <span class="pl-c1">*</span>rux.<span class="pl-smi">Context</span>) {
		<span class="pl-k">var</span> <span class="pl-s1">u</span> <span class="pl-c1">=</span> <span class="pl-en">make</span>(url.<span class="pl-smi">Values</span>)
        <span class="pl-s1">u</span>.<span class="pl-en">Add</span>(<span class="pl-s">"username"</span>, <span class="pl-s">"admin"</span>)
        <span class="pl-s1">u</span>.<span class="pl-en">Add</span>(<span class="pl-s">"password"</span>, <span class="pl-s">"12345"</span>)
		
		<span class="pl-s1">b</span> <span class="pl-c1">:=</span> <span class="pl-s1">rux</span>.<span class="pl-en">NewBuildRequestURL</span>()
        <span class="pl-c">// b.Scheme("https")</span>
        <span class="pl-c">// b.Host("www.mytest.com")</span>
        <span class="pl-s1">b</span>.<span class="pl-en">Queries</span>(<span class="pl-s1">u</span>)
        <span class="pl-s1">b</span>.<span class="pl-en">Params</span>(rux.<span class="pl-smi">M</span>{<span class="pl-s">"{category_id}"</span>: <span class="pl-s">"100"</span>, <span class="pl-s">"{new_id}"</span>: <span class="pl-s">"20"</span>})
		<span class="pl-c">// b.Path("/dev")</span>
        <span class="pl-c">// println(b.Build().String())</span>
        
        <span class="pl-en">println</span>(<span class="pl-s1">c</span>.<span class="pl-en">Router</span>().<span class="pl-en">BuildRequestURL</span>(<span class="pl-s">"new_detail"</span>, <span class="pl-s1">b</span>).<span class="pl-en">String</span>())
		<span class="pl-c">// result:  /news/100/20/detail?username=admin&amp;password=12345</span>
		<span class="pl-c">// get current route name</span>
		<span class="pl-k">if</span> <span class="pl-s1">c</span>.<span class="pl-en">MustGet</span>(<span class="pl-s1">rux</span>.<span class="pl-c1">CTXCurrentRouteName</span>) <span class="pl-c1">==</span> <span class="pl-s">"new_detail"</span> {
            <span class="pl-c">// post data etc....</span>
        }
	}).<span class="pl-en">NamedTo</span>(<span class="pl-s">"new_detail"</span>, <span class="pl-s1">router</span>)

	<span class="pl-c">// Use the HostSwitch to listen and serve on port 12345</span>
	<span class="pl-s1">log</span>.<span class="pl-en">Fatal</span>(<span class="pl-s1">http</span>.<span class="pl-en">ListenAndServe</span>(<span class="pl-s">":12345"</span>, <span class="pl-s1">router</span>))
}</pre></div>
<h2>
<a id="help" class="anchor" href="#help" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Help</h2>
<ul>
<li>lint</li>
</ul>
<div class="highlight highlight-source-shell"><pre>golint ./...</pre></div>
<ul>
<li>format check</li>
</ul>
<div class="highlight highlight-source-shell"><pre><span class="pl-c"><span class="pl-c">#</span> list error files</span>
gofmt -s -l ./
<span class="pl-c"><span class="pl-c">#</span> fix format and write to file</span>
gofmt -s -w some.go</pre></div>
<ul>
<li>unit test</li>
</ul>
<div class="highlight highlight-source-shell"><pre>go <span class="pl-c1">test</span> -cover ./...</pre></div>
<h2>
<a id="gookit-packages" class="anchor" href="#gookit-packages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Gookit Packages</h2>
<ul>
<li>
<a href="https://github.com/gookit/ini">gookit/ini</a> Go config management, use INI files</li>
<li>
<a href="https://github.com/gookit/rux">gookit/rux</a> Simple and fast request router for golang HTTP</li>
<li>
<a href="https://github.com/gookit/gcli">gookit/gcli</a> build CLI application, tool library, running CLI commands</li>
<li>
<a href="https://github.com/gookit/event">gookit/event</a> Lightweight event manager and dispatcher implements by Go</li>
<li>
<a href="https://github.com/gookit/cache">gookit/cache</a> Generic cache use and cache manager for golang. support File, Memory, Redis, Memcached.</li>
<li>
<a href="https://github.com/gookit/config">gookit/config</a> Go config management. support JSON, YAML, TOML, INI, HCL, ENV and Flags</li>
<li>
<a href="https://github.com/gookit/color">gookit/color</a> A command-line color library with true color support, universal API methods and Windows support</li>
<li>
<a href="https://github.com/gookit/filter">gookit/filter</a> Provide filtering, sanitizing, and conversion of golang data</li>
<li>
<a href="https://github.com/gookit/validate">gookit/validate</a> Use for data validation and filtering. support Map, Struct, Form data</li>
<li>
<a href="https://github.com/gookit/goutil">gookit/goutil</a> Some utils for the Go: string, array/slice, map, format, cli, env, filesystem, test and more</li>
<li>More please see <a href="https://github.com/gookit">https://github.com/gookit</a>
</li>
</ul>
<h2>
<a id="see-also" class="anchor" href="#see-also" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>See also</h2>
<ul>
<li><a href="https://github.com/gin-gonic/gin">https://github.com/gin-gonic/gin</a></li>
<li><a href="https://github.com/gorilla/mux">https://github.com/gorilla/mux</a></li>
<li><a href="https://github.com/julienschmidt/httprouter">https://github.com/julienschmidt/httprouter</a></li>
<li><a href="https://github.com/xialeistudio/go-dispatcher">https://github.com/xialeistudio/go-dispatcher</a></li>
</ul>
<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>
<p><strong><a href="LICENSE">MIT</a></strong></p>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/gookit">gookit</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
